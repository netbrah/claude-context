# Quick Start: Standalone Bundle for Your Environment

This guide is specifically for your Linux system without external network access.

## One-Command Build

```bash
# Build everything including Perl parser
pnpm run bundle:full
```

This creates: `bundle-output/claude-context-standalone-YYYYMMDD-HHMMSS.tar.gz`

## Installation on Your System

### 1. Transfer Files

Copy these to `/u/palanisd/.mcp/`:
- `claude-context-standalone-*.tar.gz` (the bundle)
- Your existing `faiss-node-v0.5.1-napi-v8-linux-x64.tar.gz`
- `prebuilds/tree-sitter-perl-x86_64-linux.node` (generated by bundle:full)

### 2. Install

```bash
cd /u/palanisd/.mcp/
tar -xzf claude-context-standalone-*.tar.gz
cd claude-context-standalone

# Install with your existing faiss prebuild and new Perl parser
FAISS_PREBUILD=/u/palanisd/.mcp/faiss-node-v0.5.1-napi-v8-linux-x64.tar.gz \
PERL_PARSER_PREBUILD=/u/palanisd/.mcp/prebuilds/tree-sitter-perl-x86_64-linux.node \
./install.sh /u/palanisd/.mcp/claude-context
```

### 3. Your MCP Config (No Changes Needed!)

Your existing config will work as-is:

```json
"claude-context": {
    "command": "/usr/bin/node",
    "args": ["/u/palanisd/.mcp/claude-context/node_modules/.bin/claude-context-mcp"],
    "env": {
        "EMBEDDING_PROVIDER": "OpenAI",
        "EMBEDDING_MODEL": "text-embedding-3-large",
        "EMBEDDING_BATCH_SIZE": "100",
        "OPENAI_API_KEY": "key=sk_...",
        "OPENAI_BASE_URL": "https://llm-proxy-api.ai.eng.netapp.com/v1",
        "MILVUS_ADDRESS": "localhost:19530",
        "MILVUS_TOKEN": "",
        "SPLITTER_TYPE": "langchain",
        "CHUNK_SIZE": "1000",
        "CHUNK_OVERLAP": "200",
        "CUSTOM_IGNORE_PATTERNS": "**/.git/**,**/__pycache__/**,**/bedrock/**,**/*cache,**/.history/**,br/**,**/.ruff_cache/**,**/.pytest_cache/**",
        "PATH": "/usr/bin:${env:PATH}"
    }
}
```

## What's Different from Your Current Process

### Before (Your Script)
```bash
# Multiple npm installs, downloads from network
npm install @zilliz/claude-context-mcp@latest  # ‚ùå Fails without network
npm update --ignore-scripts                     # ‚ùå Needs network
```

### After (Standalone Bundle)
```bash
# Everything pre-bundled, zero network calls
./install.sh  # ‚úÖ Works completely offline
```

## Benefits for Your Environment

1. **No Network Calls**: All dependencies bundled at build time
2. **No npm Registry**: Everything in the tarball
3. **Reproducible**: Same bundle works every time
4. **Fast Install**: No downloading, just extraction
5. **Existing Prebuilds**: Uses your faiss-node.tar.gz
6. **Perl Parser**: Now pre-compiled and included

## File Size Comparison

```
Your current method:
- Multiple .tgz files
- Separate node_modules installs
- ~500MB+ after npm install

Standalone bundle:
- Single .tar.gz: ~150-200MB
- Extracts to ~400MB with all deps
- No additional downloads needed
```

## Troubleshooting

### If Perl parser fails:
```bash
# Check if it was built
ls prebuilds/tree-sitter-perl-*.node

# Rebuild if needed
pnpm run build:perl-parser
```

### If faiss-node fails:
```bash
# Verify your prebuild exists
ls /u/palanisd/.mcp/faiss-node-v0.5.1-napi-v8-linux-x64.tar.gz

# Ensure it's referenced in install
FAISS_PREBUILD=/u/palanisd/.mcp/faiss-node-v0.5.1-napi-v8-linux-x64.tar.gz ./install.sh
```

### Test installation:
```bash
# Should work without errors
/u/palanisd/.mcp/claude-context/node_modules/.bin/claude-context-mcp --help
```

## Summary

Instead of your complex `update-dependencies.sh` script, you now have:

1. **Build once** (on system with network):
   ```bash
   pnpm run bundle:full
   ```

2. **Copy to target**:
   ```bash
   scp bundle-output/claude-context-standalone-*.tar.gz user@target:/u/palanisd/.mcp/
   ```

3. **Install** (completely offline):
   ```bash
   FAISS_PREBUILD=... PERL_PARSER_PREBUILD=... ./install.sh
   ```

Done! No more complex dependency management. üéâ
